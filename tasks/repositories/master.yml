---
#   Copyright Red Hat, Inc. All Rights Reserved.
#
#   Licensed under the Apache License, Version 2.0 (the "License"); you may
#   not use this file except in compliance with the License. You may obtain
#   a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#   WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#   License for the specific language governing permissions and limitations
#   under the License.
#

# TDOD (amoralej): until luminous release rpm is in extras-release we can install it from
# the CBS build URL
- name: Enable CentOS storage SIG repository for Ceph Jewel
  yum:
    name: "http://cbs.centos.org/kojifiles/packages/centos-release-ceph-luminous/1.0/1.el7.centos/noarch/centos-release-ceph-luminous-1.0-1.el7.centos.noarch.rpm"
    state: "present"
  retries: "3"
  delay: "20"

# TDOD (amoralej): until luminous is published in -release we need to disable the production
# repo and enable the testing one.
- name: "Disable Ceph luminous release repository"
  command: "yum-config-manager --disable centos-ceph-luminous"

- name: "Enable Ceph luminous release repository"
  command: "yum-config-manager --enable centos-ceph-luminous-test"
